<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>The Snaith School â€“ GCSE Geography Countdown 2026</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />

Â  <style>
Â  Â  /* --- Global & Base Styles --- */
Â  Â  :root {
Â  Â  Â  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
Â  Â  Â  background: #022c22;
Â  Â  Â  color: #e5e7eb;
Â  Â  }
Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  min-height: 100vh;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 1.5rem;
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  /* subtle â€œmapâ€ grid background */
Â  Â  Â  background:
Â  Â  Â  Â  linear-gradient(135deg, rgba(45, 212, 191, 0.12), rgba(37, 99, 235, 0.08)),
Â  Â  Â  Â  radial-gradient(circle at top left, rgba(96, 165, 250, 0.18), transparent 60%),
Â  Â  Â  Â  repeating-linear-gradient(
Â  Â  Â  Â  Â  0deg,
Â  Â  Â  Â  Â  rgba(15, 118, 110, 0.22),
Â  Â  Â  Â  Â  rgba(15, 118, 110, 0.22) 1px,
Â  Â  Â  Â  Â  transparent 1px,
Â  Â  Â  Â  Â  transparent 16px
Â  Â  Â  Â  ),
Â  Â  Â  Â  repeating-linear-gradient(
Â  Â  Â  Â  Â  90deg,
Â  Â  Â  Â  Â  rgba(15, 118, 110, 0.22),
Â  Â  Â  Â  Â  rgba(15, 118, 110, 0.22) 1px,
Â  Â  Â  Â  Â  #022c22 1px,
Â  Â  Â  Â  Â  #022c22 16px
Â  Â  Â  Â  );
Â  Â  Â  background-blend-mode: soft-light, normal, normal, normal;
Â  Â  }

Â  Â  /* --- Header Styles --- */
Â  Â  header {
Â  Â  Â  max-width: 960px;
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  }
Â  Â  h1 {
Â  Â  Â  margin: 0 0 0.4rem;
Â  Â  Â  font-size: clamp(1.9rem, 2.7vw + 1.2rem, 2.8rem);
Â  Â  Â  letter-spacing: 0.08em; /* Increased letter-spacing for impact */
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  font-weight: 800; /* Bolder title */
Â  Â  Â  color: #ffffff;
Â  Â  }
Â  Â  header p {
Â  Â  Â  margin: 0.25rem 0;
Â  Â  Â  font-size: 0.95rem;
Â  Â  Â  opacity: 0.9;
Â  Â  }
Â  Â  .today-line {
Â  Â  Â  margin-top: 0.4rem;
Â  Â  Â  font-size: 0.9rem;
Â  Â  Â  opacity: 0.85;
Â  Â  Â  font-weight: 500;
Â  Â  }

Â  Â  /* --- Card Grid & Layout --- */
Â  Â  .cards {
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 960px;
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
Â  Â  Â  gap: 1.1rem;
Â  Â  }

Â  Â  /* --- Card Styling --- */
Â  Â  .card {
Â  Â  Â  background: rgba(15, 23, 42, 0.96);
Â  Â  Â  border-radius: 1.2rem;
Â  Â  Â  padding: 1.3rem 1.5rem;
Â  Â  Â  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.8);
Â  Â  Â  border: 1px solid rgba(56, 189, 248, 0.35);
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  gap: 0.45rem;
Â  Â  Â  position: relative;
Â  Â  Â  overflow: hidden;
Â  Â  Â  /* Hover transition */
Â  Â  Â  transition: transform 0.2s, box-shadow 0.2s;
Â  Â  }
Â  Â  .card:hover {
Â  Â  Â  transform: translateY(-3px); /* Lift effect */
Â  Â  Â  box-shadow: 0 25px 55px rgba(15, 23, 42, 0.95), 0 0 20px rgba(56, 189, 248, 0.6); /* Added glow */
Â  Â  }

Â  Â  .card::before {
Â  Â  Â  content: "";
Â  Â  Â  position: absolute;
Â  Â  Â  inset: 0;
Â  Â  Â  background: radial-gradient(circle at top right, rgba(34, 197, 94, 0.15), transparent 55%);
Â  Â  Â  pointer-events: none;
Â  Â  Â  mix-blend-mode: screen;
Â  Â  }
Â  Â  .card-inner {
Â  Â  Â  position: relative;
Â  Â  Â  z-index: 1;
Â  Â  }

Â  Â  /* --- Card Content Styles (Enhanced) --- */
Â  Â  .paper-label {
Â  Â  Â  font-size: 0.78rem;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  letter-spacing: 0.16em;
Â  Â  Â  color: #38bdf8; /* Stronger accent color */
Â  Â  Â  margin-bottom: 0.15rem;
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â  .card h2 {
Â  Â  Â  margin: 0;
Â  Â  Â  font-size: 1.3rem; /* Slightly larger heading */
Â  Â  }
Â  Â  .card h2 .emoji {
Â  Â  Â  margin-right: 0.5rem;
Â  Â  }
Â  Â  .exam-code {
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  opacity: 0.8;
Â  Â  }
Â  Â  .exam-date {
Â  Â  Â  margin-top: 0.15rem;
Â  Â  Â  font-size: 0.92rem;
Â  Â  Â  font-weight: 600; /* Bolder date */
Â  Â  Â  color: #a5f3fc;
Â  Â  }

Â  Â  /* --- Main Countdown (The Big Numbers) --- */
Â  Â  .countdown-main {
Â  Â  Â  margin-top: 0.55rem;
Â  Â  Â  font-size: 1.05rem;
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: #4ade80; /* Brighter, distinct color */
Â  Â  Â  text-shadow: 0 0 8px rgba(74, 222, 128, 0.4); /* Subtle glow */
Â  Â  }
Â  Â  .countdown-main span {
Â  Â  Â  font-variant-numeric: tabular-nums;
Â  Â  Â  padding-right: 0.18rem;
Â  Â  Â  font-size: 1.8rem; /* Significantly larger */
Â  Â  Â  font-weight: 800; /* Extra bold */
Â  Â  }
Â  Â  /* Add a slight pulse animation on update for visual feedback */
Â  Â  @keyframes pulse {
Â  Â  Â  0% { opacity: 0.9; transform: scale(1); }
Â  Â  Â  50% { opacity: 1; transform: scale(1.02); }
Â  Â  Â  100% { opacity: 0.9; transform: scale(1); }
Â  Â  }
Â  Â  .countdown-main.pulsing span {
Â  Â  Â  animation: pulse 0.3s ease-out;
Â  Â  }

Â  Â  /* --- Metrics --- */
Â  Â  .metrics {
Â  Â  Â  margin-top: 0.75rem; /* More space */
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  line-height: 1.4;
Â  Â  }
Â  Â  .metrics-row {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  gap: 0.4rem;
Â  Â  Â  flex-wrap: wrap;
Â  Â  }
Â  Â  .metric-label {
Â  Â  Â  opacity: 0.7;
Â  Â  Â  font-size: 0.75rem; /* Slightly smaller label */
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  letter-spacing: 0.12em;
Â  Â  }
Â  Â  .metric-value {
Â  Â  Â  font-variant-numeric: tabular-nums;
Â  Â  Â  font-weight: 700; /* Bolder values */
Â  Â  Â  color: #bae6fd;
Â  Â  }

Â  Â  /* --- Status Bar (Enhanced) --- */
Â  Â  .status {
Â  Â  Â  margin-top: 0.6rem;
Â  Â  Â  padding: 0.4rem 0.6rem;
Â  Â  Â  background: rgba(5, 150, 105, 0.15); /* Subtle green background for status */
Â  Â  Â  border-radius: 0.4rem;
Â  Â  Â  font-size: 0.85rem;
Â  Â  Â  font-weight: 500;
Â  Â  Â  text-align: center;
Â  Â  Â  opacity: 0.95;
Â  Â  Â  color: #34d399; /* Green text for "plenty of time" */
Â  Â  }

Â  Â  /* Status specific styling (will be set by JS) */
Â  Â  .status.warning {
Â  Â  Â  background: rgba(251, 191, 36, 0.15);
Â  Â  Â  color: #fcd34d;
Â  Â  }
Â  Â  .status.critical {
Â  Â  Â  background: rgba(239, 68, 68, 0.15);
Â  Â  Â  color: #f87171;
Â  Â  }

Â  Â  /* --- Footer --- */
Â  Â  footer {
Â  Â  Â  margin-top: 1.7rem;
Â  Â  Â  font-size: 0.8rem;
Â  Â  Â  opacity: 0.75;
Â  Â  Â  text-align: center;
Â  Â  Â  max-width: 960px;
Â  Â  }
Â  </style>

Â  <script>
Â  Â  // --- Dynamic manifest (single-file PWA) ---
Â  Â  (function createManifest() {
Â  Â  Â  const manifest = {
Â  Â  Â  Â  name: "GCSE Geography Countdown â€“ The Snaith School",
Â  Â  Â  Â  short_name: "Geog Countdown",
Â  Â  Â  Â  start_url: ".",
Â  Â  Â  Â  display: "standalone",
Â  Â  Â  Â  background_color: "#022c22",
Â  Â  Â  Â  theme_color: "#0f766e",
Â  Â  Â  Â  icons: []
Â  Â  Â  };
Â  Â  Â  const blob = new Blob([JSON.stringify(manifest)], { type: "application/json" });
Â  Â  Â  const url = URL.createObjectURL(blob);
Â  Â  Â  const link = document.createElement("link");
Â  Â  Â  link.rel = "manifest";
Â  Â  Â  link.href = url;
Â  Â  Â  document.head.appendChild(link);
Â  Â  })();

Â  Â  // --- Service worker (offline) via Blob ---
Â  Â  if ("serviceWorker" in navigator) {
Â  Â  Â  window.addEventListener("load", () => {
Â  Â  Â  Â  const swCode = `
Â  Â  Â  Â  Â  const CACHE_NAME = "geog-countdown-v2";
Â  Â  Â  Â  Â  self.addEventListener("install", event => {
Â  Â  Â  Â  Â  Â  event.waitUntil(
Â  Â  Â  Â  Â  Â  Â  caches.open(CACHE_NAME).then(cache => cache.addAll([self.registration.scope]))
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  self.addEventListener("fetch", event => {
Â  Â  Â  Â  Â  Â  event.respondWith(
Â  Â  Â  Â  Â  Â  Â  caches.match(event.request).then(response => response || fetch(event.request))
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  `;
Â  Â  Â  Â  const swBlob = new Blob([swCode], { type: "text/javascript" });
Â  Â  Â  Â  const swUrl = URL.createObjectURL(swBlob);
Â  Â  Â  Â  navigator.serviceWorker.register(swUrl).catch(console.error);
Â  Â  Â  });
Â  Â  }
Â  </script>
</head>
<body>
Â  <header>
Â  Â  <h1>GCSE Geography Countdown 2026</h1>
Â  Â  <p>The Snaith School Â· **Edexcel A (1GA0)**</p>
Â  Â  <p class="today-line"></p>
Â  </header>

Â  <main class="cards">
Â  Â  Â  Â  <section class="card" data-paper-id="paper1">
Â  Â  Â  <div class="card-inner">
Â  Â  Â  Â  <div class="paper-label">Paper 1</div>
Â  Â  Â  Â  <h2><span class="emoji">â›°ï¸</span> The Physical Environment</h2>
Â  Â  Â  Â  <div class="exam-code">Exam code: **1GA0/01**</div>
Â  Â  Â  Â  <div class="exam-date"></div>

Â  Â  Â  Â  <div class="countdown-main">
Â  Â  Â  Â  Â  <span class="days">â€“</span> days
Â  Â  Â  Â  Â  <span class="hours">â€“</span> h
Â  Â  Â  Â  Â  <span class="minutes">â€“</span> m
Â  Â  Â  Â  Â  <span class="seconds">â€“</span> s
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="metrics">
Â  Â  Â  Â  Â  <div class="metrics-row">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total days</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value calendar-days">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">School days</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value teaching-days">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Geography lessons</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value lessons-left">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="metrics-row" style="margin-top:0.6rem;">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total minutes</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value total-minutes">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total seconds</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value total-seconds">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="status"></div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <section class="card" data-paper-id="paper2">
Â  Â  Â  <div class="card-inner">
Â  Â  Â  Â  <div class="paper-label">Paper 2</div>
Â  Â  Â  Â  <h2><span class="emoji">ğŸ™ï¸</span> The Human Environment</h2>
Â  Â  Â  Â  <div class="exam-code">Exam code: **1GA0/02**</div>
Â  Â  Â  Â  <div class="exam-date"></div>

Â  Â  Â  Â  <div class="countdown-main">
Â  Â  Â  Â  Â  <span class="days">â€“</span> days
Â  Â  Â  Â  Â  <span class="hours">â€“</span> h
Â  Â  Â  Â  Â  <span class="minutes">â€“</span> m
Â  Â  Â  Â  Â  <span class="seconds">â€“</span> s
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="metrics">
Â  Â  Â  Â  Â  <div class="metrics-row">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total days</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value calendar-days">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">School days</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value teaching-days">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Geography lessons</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value lessons-left">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="metrics-row" style="margin-top:0.6rem;">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total minutes</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value total-minutes">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total seconds</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value total-seconds">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="status"></div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <section class="card" data-paper-id="paper3">
Â  Â  Â  <div class="card-inner">
Â  Â  Â  Â  <div class="paper-label">Paper 3</div>
Â  Â  Â  Â  <h2><span class="emoji">ğŸ§­</span> Fieldwork &amp; UK Challenges</h2>
Â  Â  Â  Â  <div class="exam-code">Exam code: **1GA0/03**</div>
Â  Â  Â  Â  <div class="exam-date"></div>

Â  Â  Â  Â  <div class="countdown-main">
Â  Â  Â  Â  Â  <span class="days">â€“</span> days
Â  Â  Â  Â  Â  <span class="hours">â€“</span> h
Â  Â  Â  Â  Â  <span class="minutes">â€“</span> m
Â  Â  Â  Â  Â  <span class="seconds">â€“</span> s
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="metrics">
Â  Â  Â  Â  Â  <div class="metrics-row">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total days</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value calendar-days">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">School days</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value teaching-days">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Geography lessons</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value lessons-left">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="metrics-row" style="margin-top:0.6rem;">
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total minutes</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value total-minutes">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-label">Total seconds</div>
Â  Â  Â  Â  Â  Â  Â  <div class="metric-value total-seconds">â€“</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="status"></div>
Â  Â  Â  </div>
Â  Â  </section>
Â  </main>

Â  <footer>
Â  Â  Install this as an app (Add to Home Screen) and leave it running on the board â€“ it will update live,
Â  Â  including teaching days and geography lessons based on The Snaith School 2025â€“26 term dates.
Â  </footer>

Â  <script>
Â  Â  // --- Exam configuration (Edexcel A, 2026) ---
Â  Â  const exams = [
Â  Â  Â  {
Â  Â  Â  Â  id: "paper1",
Â  Â  Â  Â  name: "Paper 1 â€“ The Physical Environment",
Â  Â  Â  Â  dateTime: new Date("2026-05-13T09:00:00"),
Â  Â  Â  Â  display: "Exam: Wednesday 13 May 2026 Â· 9:00am"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  id: "paper2",
Â  Â  Â  Â  name: "Paper 2 â€“ The Human Environment",
Â  Â  Â  Â  dateTime: new Date("2026-06-03T13:30:00"),
Â  Â  Â  Â  display: "Exam: Wednesday 3 June 2026 Â· 1:30pm"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  id: "paper3",
Â  Â  Â  Â  name: "Paper 3 â€“ Fieldwork & UK Challenges",
Â  Â  Â  Â  dateTime: new Date("2026-06-11T09:00:00"),
Â  Â  Â  Â  display: "Exam: Thursday 11 June 2026 Â· 9:00am"
Â  Â  Â  }
Â  Â  ];

Â  Â  // --- Snaith 2025â€“26 holiday blocks (school closed) ---
Â  Â  const holidayBlocks = [
Â  Â  Â  { // Christmas
Â  Â  Â  Â  start: new Date("2025-12-22T00:00:00"),
Â  Â  Â  Â  end: new Date("2026-01-02T23:59:59")
Â  Â  Â  },
Â  Â  Â  { // February half term
Â  Â  Â  Â  start: new Date("2026-02-16T00:00:00"),
Â  Â  Â  Â  end: new Date("2026-02-20T23:59:59")
Â  Â  Â  },
Â  Â  Â  { // Easter + TEAL
Â  Â  Â  Â  start: new Date("2026-03-27T00:00:00"),
Â  Â  Â  Â  end: new Date("2026-04-10T23:59:59")
Â  Â  Â  }
Â  Â  ];

Â  Â  // --- Helper functions (Unchanged, they are robust) ---
Â  Â  function startOfDay(d) {
Â  Â  Â  const x = new Date(d);
Â  Â  Â  x.setHours(0, 0, 0, 0);
Â  Â  Â  return x;
Â  Â  }

Â  Â  function endOfDay(d) {
Â  Â  Â  const x = new Date(d);
Â  Â  Â  x.setHours(23, 59, 59, 999);
Â  Â  Â  return x;
Â  Â  }

Â  Â  function countWeekdaysInclusive(start, end) {
Â  Â  Â  const s = startOfDay(start);
Â  Â  Â  const e = startOfDay(end);
Â  Â  Â  if (e < s) return 0;
Â  Â  Â  let count = 0;
Â  Â  Â  const d = new Date(s);
Â  Â  Â  while (d <= e) {
Â  Â  Â  Â  const day = d.getDay(); // 0 = Sun, 1 = Mon
Â  Â  Â  Â  if (day >= 1 && day <= 5) count++;
Â  Â  Â  Â  d.setDate(d.getDate() + 1);
Â  Â  Â  }
Â  Â  Â  return count;
Â  Â  }

Â  Â  function getOverlap(startA, endA, startB, endB) {
Â  Â  Â  const start = startA > startB ? startA : startB;
Â  Â  Â  const end = endA < endB ? endA : endB;
Â  Â  Â  if (end < start) return null;
Â  Â  Â  return { start, end };
Â  Â  }

Â  Â  function getTeachingDaysLeft(now, examDate) {
Â  Â  Â  const todayStart = startOfDay(now);
Â  Â  Â  const examDay = startOfDay(examDate);
Â  Â  Â  if (examDay < todayStart) return { teachingDays: 0, totalWeekdays: 0, holidayWeekdays: 0 };

Â  Â  Â  const totalWeekdays = countWeekdaysInclusive(todayStart, examDay);

Â  Â  Â  let holidayWeekdays = 0;
Â  Â  Â  for (const block of holidayBlocks) {
Â  Â  Â  Â  const overlap = getOverlap(todayStart, examDay, startOfDay(block.start), endOfDay(block.end));
Â  Â  Â  Â  if (overlap) {
Â  Â  Â  Â  Â  holidayWeekdays += countWeekdaysInclusive(overlap.start, overlap.end);
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  const teachingDays = Math.max(0, totalWeekdays - holidayWeekdays);
Â  Â  Â  return { teachingDays, totalWeekdays, holidayWeekdays };
Â  Â  }

Â  Â  function formatTwo(n) {
Â  Â  Â  return n.toString().padStart(2, "0");
Â  Â  }
    
Â  Â  // --- Main Update Function (Enhanced with animation and status classes) ---
Â  Â  let previousSeconds = {}; // Track seconds for animation

Â  Â  function updateCountdowns() {
Â  Â  Â  const now = new Date();

Â  Â  Â  const todayLine = document.querySelector(".today-line");
Â  Â  Â  if (todayLine) {
Â  Â  Â  Â  todayLine.textContent = "Today is " + now.toLocaleString("en-GB", {
Â  Â  Â  Â  Â  weekday: "long",
Â  Â  Â  Â  Â  year: "numeric",
Â  Â  Â  Â  Â  month: "long",
Â  Â  Â  Â  Â  day: "numeric",
Â  Â  Â  Â  Â  hour: "2-digit",
Â  Â  Â  Â  Â  minute: "2-digit",
Â  Â  Â  Â  Â  second: "2-digit" // Added seconds for live feel
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  exams.forEach(exam => {
Â  Â  Â  Â  const card = document.querySelector(`.card[data-paper-id="${exam.id}"]`);
Â  Â  Â  Â  if (!card) return;

Â  Â  Â  Â  const examDate = exam.dateTime;
Â  Â  Â  Â  const examDateEl = card.querySelector(".exam-date");
Â  Â  Â  Â  if (examDateEl) {
Â  Â  Â  Â  Â  examDateEl.textContent = exam.display;
Â  Â  Â  Â  }

Â  Â  Â  Â  const diffMs = examDate - now;
Â  Â  Â  Â  const daysEl = card.querySelector(".days");
Â  Â  Â  Â  const hoursEl = card.querySelector(".hours");
Â  Â  Â  Â  const minutesEl = card.querySelector(".minutes");
Â  Â  Â  Â  const secondsEl = card.querySelector(".seconds");
Â  Â  Â  Â  const calDaysEl = card.querySelector(".calendar-days");
Â  Â  Â  Â  const teachingDaysEl = card.querySelector(".teaching-days");
Â  Â  Â  Â  const lessonsEl = card.querySelector(".lessons-left");
Â  Â  Â  Â  const totalMinutesEl = card.querySelector(".total-minutes");
Â  Â  Â  Â  const totalSecondsEl = card.querySelector(".total-seconds");
Â  Â  Â  Â  const statusEl = card.querySelector(".status");
        const countdownMainEl = card.querySelector(".countdown-main");

Â  Â  Â  Â  if (diffMs <= 0) {
Â  Â  Â  Â  Â  if (daysEl) daysEl.textContent = "0";
Â  Â  Â  Â  Â  if (hoursEl) hoursEl.textContent = "00";
Â  Â  Â  Â  Â  if (minutesEl) minutesEl.textContent = "00";
Â  Â  Â  Â  Â  if (secondsEl) secondsEl.textContent = "00";
Â  Â  Â  Â  Â  if (calDaysEl) calDaysEl.textContent = "0";
Â  Â  Â  Â  Â  if (teachingDaysEl) teachingDaysEl.textContent = "0";
Â  Â  Â  Â  Â  if (lessonsEl) lessonsEl.textContent = "0";
Â  Â  Â  Â  Â  if (totalMinutesEl) totalMinutesEl.textContent = "0";
Â  Â  Â  Â  Â  if (totalSecondsEl) totalSecondsEl.textContent = "0";
Â  Â  Â  Â  Â  if (statusEl) {
                statusEl.textContent = "âœ… Exam completed!";
                statusEl.className = "status critical";
            }
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const totalSeconds = Math.floor(diffMs / 1000);
Â  Â  Â  Â  const totalMinutes = Math.floor(totalSeconds / 60);
Â  Â  Â  Â  const calendarDays = Math.floor(totalSeconds / 86400);

Â  Â  Â  Â  const days = calendarDays;
Â  Â  Â  Â  let remainder = totalSeconds - days * 86400;
Â  Â  Â  Â  const hours = Math.floor(remainder / 3600);
Â  Â  Â  Â  remainder %= 3600;
Â  Â  Â  Â  const mins = Math.floor(remainder / 60);
Â  Â  Â  Â  const secs = remainder % 60;

Â  Â  Â  Â  if (daysEl) daysEl.textContent = String(days);
Â  Â  Â  Â  if (hoursEl) hoursEl.textContent = formatTwo(hours);
Â  Â  Â  Â  if (minutesEl) minutesEl.textContent = formatTwo(mins);
Â  Â  Â  Â  if (secondsEl) secondsEl.textContent = formatTwo(secs);

        // Animation: Pulse the seconds when they change
        if (countdownMainEl && secondsEl) {
            if (previousSeconds[exam.id] !== secs) {
                countdownMainEl.classList.add('pulsing');
                setTimeout(() => countdownMainEl.classList.remove('pulsing'), 300);
            }
            previousSeconds[exam.id] = secs;
        }

Â  Â  Â  Â  if (calDaysEl) calDaysEl.textContent = calendarDays.toString();
Â  Â  Â  Â  if (totalMinutesEl) totalMinutesEl.textContent = totalMinutes.toLocaleString("en-GB");
Â  Â  Â  Â  if (totalSecondsEl) totalSecondsEl.textContent = totalSeconds.toLocaleString("en-GB");

Â  Â  Â  Â  const { teachingDays, totalWeekdays, holidayWeekdays } = getTeachingDaysLeft(now, examDate);
Â  Â  Â  Â  // Assuming an average of 3 lessons per week (or 6 lessons per 10 school days)
Â  Â  Â  Â  const lessonsLeft = Math.ceil(teachingDays / (10/6)); 

Â  Â  Â  Â  if (teachingDaysEl) teachingDaysEl.textContent = teachingDays.toString();
Â  Â  Â  Â  if (lessonsEl) lessonsEl.textContent = lessonsLeft.toString();

Â  Â  Â  Â  if (statusEl) {
            statusEl.classList.remove('warning', 'critical');
Â  Â  Â  Â  Â  if (days <= 7) {
Â  Â  Â  Â  Â  Â  statusEl.textContent = "ğŸš¨ Final push â€“ under one week to go. Maximum effort required!";
                statusEl.classList.add('critical');
Â  Â  Â  Â  Â  } else if (days <= 30) {
Â  Â  Â  Â  Â  Â  statusEl.textContent = "âš ï¸ Less than a month left â€“ targeted revision and exam practice is key.";
                statusEl.classList.add('warning');
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  statusEl.textContent = "â³ Plenty of time â€“ build secure knowledge and case study detail.";
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  }

Â  Â  updateCountdowns();
Â  Â  setInterval(updateCountdowns, 1000);
Â  </script>
</body>
</html>
